!function(){"use strict";let e={isDevelopement:!1,theme:"system",databaseFile:{},configPath:"",updates:{autoCheck:!0,autoDownload:!1},vueApp:null},s=localStorage.getItem("config");s?e=JSON.parse(s):localStorage.setItem("config",JSON.stringify(e));var t=e;alert("Browsers are not supported yet"),window.SharedWorker||alert("Shared Workers are not supported in your browser\nSome functionalities may be missing.");const n=new SharedWorker("/app/resources/browser.worker.js",{name:"mainWorker"});n.port.start(),console.log("started shared worker"),n.port.postMessage({command:"config",config:t}),window.ipcrenderer=new class{constructor(e){this.worker=e,this.port=this.worker.port,this.onceListeners={},this.listeners={},this.port.addEventListener("message",(e=>{var s,t;(null===(s=e.data)||void 0===s?void 0:s.channel)?(console.log("IPCRenderer: Recived message ",e.data," from main"),this.listeners[e.data.channel]&&this.listeners[e.data.channel].forEach((s=>{var t;return s(this.ipcrendererevent(),...null===(t=e.data)||void 0===t?void 0:t.args)})),this.onceListeners[e.data.channel]&&(this.onceListeners[e.data.channel].forEach((s=>{var t;return s(this.ipcrendererevent(),...null===(t=e.data)||void 0===t?void 0:t.args)})),this.onceListeners[e.data.channel]=null)):(null===(t=e.data)||void 0===t?void 0:t.toIpcClass)&&(this.id=e.data.id,(this.id=0)&&alert("This tab holds the main process!\nDon't close this."))}))}ipcrendererevent(){return{sender:this,senderId:this.id}}on(e,s){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(s),this}once(e,s){return this.onceListeners[e]||(this.onceListeners[e]=[]),this.onceListeners[e].push(s),this}send(e,...s){console.log("Posting message ",e,":",s," to the worker"),this.port.postMessage({channel:e,args:s})}}(n),window.ipcrenderer.on("ipc",((e,s)=>{switch(s.command){case"openExternal":window.open(s.url,"_blank");break;case"openForm":let n=new URLSearchParams({form:s.type,...s.args});window.open("forms.html?"+n.toString(),"_blank","width=600,height=400,");break;case"showMessageBox":let r={response:confirm(s.options.message),checkboxChecked:!1};e.sender.send("ipc-showMessageBox",{command:"showMessageBox",data:r});break;case"updateConfig":t=s.newConfig,localStorage.setItem("config",JSON.stringify(t)),e.sender.send("ipc-updateConfig",{command:"updateConfig"})}var t})),n.onerror=function(e){throw e},window.config=t}();
