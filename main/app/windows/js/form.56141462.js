(function(e){function t(t){for(var i,r,o=t[0],d=t[1],c=t[2],u=0,h=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(e[i]=d[i]);l&&l(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],i=!0,o=1;o<s.length;o++){var d=s[o];0!==n[d]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=s[0]))}return e}var i={},n={form:0},a=[];function r(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=i,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=d;a.push([1,"chunk-vendors"]),s()})({"0670":function(e,t,s){"use strict";s("5363");var i=s("2b0e"),n=s("f309");let a=window.matchMedia("(prefers-color-scheme: dark)");i["a"].use(n["a"]);const r=new n["a"]({theme:{dark:a.matches,disable:!1},icons:{iconfont:"mdi"}});window.vuetify=r,a.addEventListener("change",(function(e){r.framework.theme.dark=e.matches})),window.openExternal=function(e){window.ipcrenderer.send("open-external",e)},t["a"]=r},1:function(e,t,s){e.exports=s("117e")},"117e":function(e,t,s){"use strict";s.r(t);var i=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return"addUser"===e.form?s("create-user",{key:"app"}):"addGroup"===e.form?s("create-group",{key:"app"}):e._e()},a=[],r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",{attrs:{id:"1_app"}},[s("v-main",[s("v-container",{attrs:{id:"container"}},[s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"500",id:"card"}},[s("v-card-title",{staticClass:"title font-weight-regular justify-space-between"},[s("span",[e._v(e._s(e.currentTitle))]),s("v-avatar",{staticClass:"headding grey--text",attrs:{color:"lighten",size:"48"}},[s("v-icon",[e._v("mdi-account-plus")])],1)],1),s("v-window",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[s("v-window-item",{attrs:{value:1}},[s("v-card-text",[s("v-text-field",{attrs:{label:"User Name","prepend-icon":"mdi-account",required:"",id:"name",loading:e.loading,readonly:e.disableInputs},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.next(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),s("span",{staticClass:"caption grey--text text--darken-1"},[e._v("This will be the name of the new user.")])],1)],1),s("v-window-item",{attrs:{value:2}},[s("v-card-text",[s("v-text-field",{attrs:{label:"Phone","prepend-icon":"mdi-phone",required:"",id:"phone",loading:e.loading,readonly:e.disableInputs,"error-messages":e.phoneMessage},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.next(t)},input:e.phoneChange},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),s("span",{staticClass:"caption grey--text text--darken-1"},[e._v("Please enter the phone number of the user. This must be unique for every user.")])],1)],1),s("v-window-item",{attrs:{value:3}},[s("v-card-text",[s("v-textarea",{attrs:{label:"Address","prepend-icon":"mdi-home",outlined:"","no-resize":"",id:"address",loading:e.loading,readonly:e.disableInputs,rows:"4"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),s("span",{staticClass:"caption grey--text text--darken-1"},[e._v("Please enter the Address of the user.")])],1)],1),s("v-window-item",{attrs:{value:4}},[s("v-card-text",[s("span",[e._v("The details of the new user are:")]),s("br"),s("br"),s("table",[s("tbody",[s("tr",[s("td",[s("v-icon",[e._v("mdi-account")])],1),s("td",[e._v(e._s(e.name))])]),s("tr",[s("td",[s("v-icon",[e._v("mdi-phone")])],1),s("td",[e._v(e._s(e.phone))])]),s("tr",[s("td",[s("v-icon",[e._v("mdi-home")])],1),s("td",[e._v(e._s(e.address))])])])]),s("br"),s("span",[e._v("Please check the details and click finish.")])])],1)],1),s("v-divider"),s("v-card-actions",[s("v-btn",{attrs:{disabled:1===e.step||e.disableButtons,text:""},on:{click:function(t){e.step--}}},[e._v("Back")]),s("v-spacer"),4!==e.step?s("v-btn",{attrs:{id:"next",color:"primary",disabled:e.disableButtons},on:{click:e.stepForward}},[e._v("Next")]):e._e(),4===e.step?s("v-btn",{key:"next",attrs:{color:e.submited?"success":"primary",disabled:e.submited&&!e.success},on:{click:e.submit}},[e.submited?e._e():s("v-icon",[e._v("mdi-account-check")]),e.submited&&e.success?s("v-icon",[e._v("mdi-checkbox-marked-circle-outline")]):e._e(),e._v("Finish ")],1):e._e()],1)],1)],1)],1)],1)},o=[],d=s("3022"),c=i["a"].extend({name:"create-user",data:()=>{let e={step:1,phone:"",phoneMessage:"",name:"",address:"",disableButtons:!1,disableInputs:!1,loading:!1,submited:!1,success:!1,skipValidation:!1};return e},watch:{step:()=>{window.resizeWindowToCard()}},methods:{next(){document.getElementById("next").click()},phoneChange(){if(!this.phone)return;let e=this.phone;e.startsWith("+")||e.startsWith("0")||(e="+91"+e),e=(e.startsWith("+")?"+":"")+e.replace(/[^0-9]/g,"").trim(),e.startsWith("+91")&&e.length>3&&(e="+91 "+e.slice(3,13)),e.startsWith("0")&&e.length>5&&(e=e.slice(0,5)+"-"+e.slice(5,11)),setTimeout(()=>{this.phone=e},0)},stepForward(){this.skipValidation?this.step++:(this.disableButtons=!0,this.disableInputs=!0,this.loading=!0,this.validate(e=>{e&&this.step++,this.disableInputs=!1,this.disableButtons=!1,this.loading=!1}))},validate(e){if(this.step>3)return e(!0);switch(this.step){case 1:return this.name?e(!0):e(!1);case 2:if(!this.phone)return e(!1);if(this.phone.startsWith("+91")&&this.phone.length<14)return this.phoneMessage="Indian phone numbers must contain 10 digits",e(!1);if(this.phone.startsWith("0")&&this.phone.length<12)return this.phoneMessage="Local landline numbers must contain 11 digits",e(!1);this.phoneMessage="",window.ipcrenderer.once("phone-exists",(t,s,i)=>{i?(this.phoneMessage="Number Already exists",e(!1)):e(!0)}),window.ipcrenderer.send("phone-exists",this.phone);break;case 3:return this.address?e(!0):e(!1)}},submit(){this.submited?window.close():(this.submited=!0,this.disableInputs=!0,this.skipValidation=!0,window.ipcrenderer.once("create-user",(e,t,s)=>{t?(window.ipcrenderer.send("show-message-box",{message:"Some error occoured during the creation of User",type:"error",title:"Cannot create User!",detail:Object(d["inspect"])(t)}),this.success=!1):s?(window.ipcrenderer.send("show-message-box",{message:"User created SUCCESSFULLY !",type:"info",title:"Created New User!",detail:Object(d["inspect"])(s)}),this.success=!0):(window.ipcrenderer.send("show-message-box",{message:"Some error occoured during the creation of User\nTry checking phone number.",type:"error",title:"Cannot create User!",detail:"err and detail variables are undefined"}),this.success=!1)}),window.ipcrenderer.send("create-user",{name:this.name,phone:this.phone,address:this.address}))}},computed:{currentTitle(){switch(this.step){case 1:return"Add User";case 2:return"Phone Number of "+this.name;case 3:return"Address of "+this.name;case 4:return"Final"}}},components:{},mounted(){window.document.title="Create User"}}),l=c,u=s("2877"),h=s("6544"),p=s.n(h),m=s("7496"),b=s("8212"),v=s("8336"),f=s("b0af"),w=s("99d9"),g=s("a523"),x=s("ce7e"),y=s("132d"),_=s("f6c4"),k=s("2fa4"),C=s("8654"),V=s("a844"),O=s("f665"),M=s("1e6c"),I=Object(u["a"])(l,r,o,!1,null,null,null),T=I.exports;p()(I,{VApp:m["a"],VAvatar:b["a"],VBtn:v["a"],VCard:f["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:w["c"],VContainer:g["a"],VDivider:x["a"],VIcon:y["a"],VMain:_["a"],VSpacer:k["a"],VTextField:C["a"],VTextarea:V["a"],VWindow:O["a"],VWindowItem:M["a"]});var P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",{attrs:{id:"1_app"}},[s("v-main",[s("v-container",{attrs:{id:"container"}},[s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"500"}},[s("v-card-title",{staticClass:"title font-weight-regular justify-space-between"},[s("span",[e._v(e._s(e.currentTitle))]),s("v-avatar",{staticClass:"headding grey--text",attrs:{color:"lighten",size:"48"}},[s("v-icon",[e._v("mdi-account-multiple-plus")])],1)],1),s("v-window",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[s("v-window-item",{attrs:{value:1}},[s("v-card-text",[s("v-date-picker",{attrs:{label:"Month",type:"month",required:"",id:"month",loading:e.loading,readonly:e.disableInputs,"full-width":"",color:"primary"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.next(t)}},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}}),s("br"),s("span",{staticClass:"caption grey--text text--darken-1"},[e._v("Please select year and month of the batch.")])],1)],1),s("v-window-item",{attrs:{value:2}},[s("v-card-text",[s("v-text-field",{attrs:{label:"Batch Name","prepend-icon":"mdi-alphabetical-variant",required:"",id:"batch",loading:e.loading,readonly:e.disableInputs,"error-messages":e.batchMessage},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.next(t)},input:e.batchChange},model:{value:e.batch,callback:function(t){e.batch=t},expression:"batch"}}),s("span",{staticClass:"caption grey--text text--darken-1"},[e._v("Please enter a name for this batch in month of "+e._s(this.month)+". This must be unique for every batch within a month.")])],1)],1),s("v-window-item",{attrs:{value:3}},[s("v-card-text",[s("v-card",{attrs:{loading:e.loading}},[s("v-card-text",[s("v-autocomplete",{attrs:{items:e.users,loading:e.loading,"hide-no-data":"","hide-selected":"","item-text":"name","item-value":"UID",label:"Member","prepend-icon":"mdi-account",readonly:e.disableInputs,"return-object":"","append-outer-icon":"mdi-reload"},on:{"click:append-outer":e.reloadUsers},model:{value:e.memberModel,callback:function(t){e.memberModel=t},expression:"memberModel"}}),s("v-text-field",{attrs:{"prepend-icon":"mdi-number",label:"Number of Chits",type:"number",max:20-e.totalChits,min:"0",readonly:e.disableInputs},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.window.document.getElementById("add").click()}},model:{value:e.noOfChits,callback:function(t){e.noOfChits=t},expression:"noOfChits"}})],1),s("v-divider"),s("v-expand-transition",[e.memberModel?s("v-list",{staticStyle:{position:"absolute","z-index":"1"},attrs:{width:"312",elevation:"5"}},[e._l(e.memberModel,(function(t,i){return s("v-list-item",{key:i+"userDetail"},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:e._s(t)}}),s("v-list-item-subtitle",{domProps:{textContent:e._s(i)}})],1)],1)})),s("v-list-item",[s("v-btn",{attrs:{disabled:!e.memberModel},on:{click:function(t){e.memberModel=null}}},[s("v-icon",[e._v("mdi-close")])],1)],1)],2):e._e()],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{disabled:!e.memberModel||!e.noOfChits||!(parseFloat(e.noOfChits)>0)||parseFloat(e.noOfChits)>20-e.totalChits,color:"primary",id:"add"},on:{click:e.addMember}},[e._v(" Add "),s("v-icon",[e._v("mdi-plus")])],1)],1)],1),s("div",{staticStyle:{height:"300px",overflow:"auto"}},[s("v-subheader",[e._v("Members of the new group:")]),s("v-list",[s("v-fab-transition",{attrs:{group:""}},e._l(e.members,(function(t){return s("v-list-item",{key:t.info.UID+"memberDetail",on:{click:function(){}}},[s("v-list-item-content",{attrs:{title:t.info.phone+"\n"+t.info.address}},[e._v(e._s(t.info.name))]),s("v-chip",{domProps:{textContent:e._s(t.noOfChits)}}),s("v-list-item-action",{on:{click:function(s){return e.removeMember(t)}}},[s("v-icon",[e._v("mdi-close-circle")])],1)],1)})),1)],1)],1),s("span",{staticClass:"caption grey--text text--darken-1"},[e._v(" Please add members for this group. Total no of chits must be 20. "),s("br"),e._v(" "+e._s(e.totalChits)+" alloted "+e._s(20-e.totalChits)+" remaining. ")])],1),s("v-progress-linear",{attrs:{value:5*e.totalChits}})],1),s("v-window-item",{attrs:{value:4}},[s("v-card-text",[s("span",[e._v("The details of the new Group are:")]),s("br"),s("br"),s("v-list",[s("v-subheader",[e._v("Month")]),s("v-list-item",[s("v-list-item-icon",[s("v-icon",[e._v("mdi-calendar")])],1),s("v-list-item-title",[e._v(e._s(e.month))])],1),s("v-subheader",[e._v("Batch Name")]),s("v-list-item",[s("v-list-item-icon",[s("v-icon",[e._v("mdi-alphabetical-variant")])],1),s("v-list-item-title",[e._v(e._s(e.batch))])],1),s("v-subheader",[e._v("Members")]),s("v-list-group",{attrs:{"prepend-icon":"mdi-account-group","no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[s("v-list-item-content",[s("v-list-item-title",[e._v(e._s(e.members.length)+" Members")])],1)]},proxy:!0}])},e._l(e.members,(function(t){return s("v-list-item",{key:t.info.UID+"memberFinal"},[s("v-list-item-content",{attrs:{title:t.info.phone+"\n"+t.info.address},domProps:{textContent:e._s(t.info.name)}}),s("v-chip",{domProps:{textContent:e._s(t.noOfChits)}})],1)})),1)],1),s("br"),s("span",[e._v("Please check the details and click finish.")])],1)],1)],1),s("v-divider"),s("v-card-actions",[s("v-btn",{attrs:{disabled:1===e.step||e.disableButtons,text:""},on:{click:function(t){e.step--}}},[e._v("Back")]),s("v-spacer"),4!==e.step?s("v-btn",{attrs:{id:"next",color:"primary",disabled:e.disableButtons||3===e.step&&20!==e.totalChits},on:{click:e.stepForward}},[e._v("Next")]):e._e(),4===e.step?s("v-btn",{key:"next",attrs:{color:e.submited?"primary":"success",disabled:e.submited&&!e.success},on:{click:e.submit}},[e.submited?e._e():s("v-icon",[e._v("mdi-content-save")]),e.submited&&e.success?s("v-icon",[e._v("mdi-checkbox-marked-circle-outline")]):e._e(),e._v("Finish ")],1):e._e()],1)],1)],1)],1)],1)},U=[],B=i["a"].extend({name:"create-user",data:()=>({step:1,month:"",batch:"",batchMessage:"",members:[],memberModel:null,noOfChits:null,users:[],disableButtons:!1,disableInputs:!1,loading:!1,submited:!1,success:!1,skipValidation:!1,window:window}),computed:{totalChits(){let e=0;return this.members.forEach(t=>{e+=t.noOfChits}),e},currentTitle(){switch(this.step){case 1:return"Create Group";case 2:return"Batch Name";case 3:return"Add members for "+this.batch+" batch";case 4:return"Final"}}},watch:{step:function(){window.resizeWindowToCard(),3===this.step&&this.getUsers()}},methods:{removeMember(e){this.users.push(e.info),this.members.splice(this.members.indexOf(e),1)},addMember(){if(this.memberModel&&this.noOfChits){let e=this.users.splice(this.users.indexOf(this.memberModel),1);if(1!==e.length)return void this.users.push(...e);this.members.push({info:e[0],noOfChits:parseFloat(this.noOfChits)}),this.memberModel=null,this.noOfChits=null}},next(){document.getElementById("next").click()},batchChange(){if(!this.batch)return;let e=this.batch;e=e.toUpperCase().replace(/[^A-Z]/g,""),e=e.charAt(e.length-1),setTimeout(()=>{this.batch=e},0)},stepForward(){this.skipValidation?this.step++:(this.disableButtons=!0,this.disableInputs=!0,this.loading=!0,this.validate(e=>{e&&this.step++,this.disableInputs=!1,this.disableButtons=!1,this.loading=!1}))},getUsers(){this.loading=!0,this.disableInputs=!0,window.ipcrenderer.once("get-users-data",(e,t)=>{this.users=t,console.log(t),this.disableInputs=!1,this.loading=!1}),window.ipcrenderer.send("get-users-data")},reloadUsers(){this.loading=!0,this.disableInputs=!0,window.ipcrenderer.once("get-users-data",(e,t)=>{console.log(t),this.members.forEach(e=>{this.users.splice(this.users.indexOf(e.info),1)}),this.disableInputs=!1,this.loading=!1}),window.ipcrenderer.send("get-users-data")},validate(e){if(this.step>3)return e(!0);switch(this.step){case 1:return this.month?e(!0):e(!1);case 2:if(!this.batch)return e(!1);this.batchMessage="",window.ipcrenderer.once("batch-exists",(t,s,i)=>{i?(this.batchMessage="Batch Already exists",e(!1)):e(!0)}),window.ipcrenderer.send("batch-exists",this.batch,this.month);break;case 3:return this.members?20!==this.totalChits?e(!1):e(!0):e(!1)}},submit(){this.submited?window.close():(this.submited=!0,this.disableInputs=!0,this.skipValidation=!0,window.ipcrenderer.once("create-group",(e,t,s)=>{t?(window.ipcrenderer.send("show-message-box",{message:"Some error occoured during the creation of Group",type:"error",title:"Cannot create Group!",detail:Object(d["inspect"])(t)}),this.success=!1):s?(window.ipcrenderer.send("show-message-box",{message:"Group created SUCCESSFULLY !",type:"info",title:"Created New Group!",detail:Object(d["inspect"])(s)}),this.success=!0):(window.ipcrenderer.send("show-message-box",{message:"Some error occoured during the creation of Group\nTry checking batch name.",type:"error",title:"Cannot create Group!",detail:"err and detail variables are undefined or not truthly"}),this.success=!1)}),window.ipcrenderer.send("create-group",{month:this.month,batch:this.batch,members:this.members}))}},components:{},mounted(){window.resizeTo(550,700),window.document.title="Create Group"}}),S=B,j=s("c6a6"),E=s("cc20"),A=s("2e4b"),F=s("0789"),L=s("8860"),W=s("56b0"),G=s("da13"),N=s("1800"),z=s("5d23"),D=s("34c3"),q=s("8e36"),$=s("e0c7"),J=Object(u["a"])(S,P,U,!1,null,null,null),Y=J.exports;p()(J,{VApp:m["a"],VAutocomplete:j["a"],VAvatar:b["a"],VBtn:v["a"],VCard:f["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:w["c"],VChip:E["a"],VContainer:g["a"],VDatePicker:A["a"],VDivider:x["a"],VExpandTransition:F["a"],VFabTransition:F["c"],VIcon:y["a"],VList:L["a"],VListGroup:W["a"],VListItem:G["a"],VListItemAction:N["a"],VListItemContent:z["a"],VListItemIcon:D["a"],VListItemSubtitle:z["b"],VListItemTitle:z["c"],VMain:_["a"],VProgressLinear:q["a"],VSpacer:k["a"],VSubheader:$["a"],VTextField:C["a"],VWindow:O["a"],VWindowItem:M["a"]});const H=new URL(window.location.href),R=H.searchParams.get("form");console.log(R);var Z=i["a"].extend({data:()=>({form:R}),components:{CreateUser:T,CreateGroup:Y},mounted(){window.resizeWindowToCard()}});window.resizeWindowToCard=function(){setTimeout(()=>{window.resizeTo(550,document.getElementById("container").offsetHeight+42)},350)};var K=Z,Q=Object(u["a"])(K,n,a,!1,null,null,null),X=Q.exports,ee=s("0670");i["a"].config.productionTip=!1,window.app=new i["a"]({render:e=>e(X),vuetify:ee["a"]}).$mount("#app")}});
//# sourceMappingURL=form.56141462.js.map